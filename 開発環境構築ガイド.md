# AIã‚¦ã‚§ãƒ–åˆ†æã‚·ã‚¹ãƒ†ãƒ  é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ã‚¬ã‚¤ãƒ‰

## ã¯ã˜ã‚ã«
ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€AIã‚¦ã‚§ãƒ–åˆ†æã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚
åˆã‚ã¦ã®æ–¹ã§ã‚‚è¿·ã‚ãšç’°å¢ƒæ§‹ç¯‰ã§ãã‚‹ã‚ˆã†ã€è©³ç´°ãªæ‰‹é †ã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚

---

## å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢

### 1. åŸºæœ¬ãƒ„ãƒ¼ãƒ«
- **Node.js**: v18.0.0 ä»¥ä¸Šï¼ˆæ¨å¥¨: v20.10.0ï¼‰
- **npm**: v9.0.0 ä»¥ä¸Š
- **Git**: v2.30.0 ä»¥ä¸Š
- **Docker Desktop**: v4.0.0 ä»¥ä¸Š
- **VSCode**: æœ€æ–°ç‰ˆï¼ˆæ¨å¥¨ã‚¨ãƒ‡ã‚£ã‚¿ï¼‰

### 2. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

#### macOS
```bash
# Homebrewã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å ´åˆï¼‰
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# Node.jsã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
brew install node@20

# Dockerã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
brew install --cask docker

# ãã®ä»–ãƒ„ãƒ¼ãƒ«
brew install git postgresql redis
```

#### Windows (WSL2æ¨å¥¨)
```bash
# WSL2ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
wsl --install

# Ubuntuå†…ã§Node.jsã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# Dockerã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# Docker Desktop for Windowsã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# https://www.docker.com/products/docker-desktop
```

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ
mkdir ~/projects
cd ~/projects

# ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ï¼ˆå®Ÿéš›ã®URLã«ç½®ãæ›ãˆï¼‰
git clone https://github.com/your-org/ai-web-analytics.git
cd ai-web-analytics
```

### 2. åˆæœŸè¨­å®šã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œ
```bash
# å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸
chmod +x scripts/setup.sh

# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œ
./scripts/setup.sh
```

### 3. æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå‹•ä½œã—ãªã„å ´åˆï¼‰

#### ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
```bash
# .env.localãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
cp .env.example .env.local

# .env.localã‚’ç·¨é›†
nano .env.local
```

**.env.local ã®å†…å®¹ä¾‹**
```env
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
NODE_ENV=development
PORT=3000
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:3001

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
DATABASE_URL=postgresql://analytics:password@localhost:5432/analytics_dev
REDIS_URL=redis://localhost:6379

# èªè¨¼è¨­å®š
JWT_SECRET=your-super-secret-jwt-key-change-this
JWT_EXPIRES_IN=7d
REFRESH_TOKEN_EXPIRES_IN=30d

# OpenAIè¨­å®šï¼ˆAIåˆ†æç”¨ï¼‰
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_MODEL=gpt-3.5-turbo

# ãƒ¡ãƒ¼ãƒ«è¨­å®šï¼ˆé–‹ç™ºç’°å¢ƒã§ã¯Mailtrapã‚’æ¨å¥¨ï¼‰
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_USER=your-mailtrap-user
SMTP_PASS=your-mailtrap-pass
EMAIL_FROM=noreply@ai-analytics.dev

# AWSè¨­å®šï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯LocalStackã‚’ä½¿ç”¨ï¼‰
AWS_REGION=ap-northeast-1
AWS_ACCESS_KEY_ID=test
AWS_SECRET_ACCESS_KEY=test
S3_BUCKET=ai-analytics-dev

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
CORS_ORIGIN=http://localhost:3000
SESSION_SECRET=your-session-secret-change-this

# ç›£è¦–ãƒ»ãƒ­ã‚°è¨­å®š
LOG_LEVEL=debug
SENTRY_DSN=
```

#### ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
npm install

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ä¾å­˜é–¢ä¿‚
cd frontend
npm install

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ä¾å­˜é–¢ä¿‚
cd ../backend
npm install

# Pythonã®ä¾å­˜é–¢ä¿‚ï¼ˆAIåˆ†æã‚¨ãƒ³ã‚¸ãƒ³ç”¨ï¼‰
cd ../ai-engine
python -m venv venv
source venv/bin/activate  # Windowsã®å ´åˆ: venv\Scripts\activate
pip install -r requirements.txt
```

---

## Dockerç’°å¢ƒã®æ§‹ç¯‰

### 1. docker-compose.yml ã®ä½œæˆ
```yaml
version: '3.8'

services:
  # PostgreSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
  postgres:
    image: postgres:15.5-alpine
    container_name: ai-analytics-postgres
    environment:
      POSTGRES_USER: analytics
      POSTGRES_PASSWORD: password
      POSTGRES_DB: analytics_dev
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./scripts/init-db.sql:/docker-entrypoint-initdb.d/init.sql
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U analytics"]
      interval: 10s
      timeout: 5s
      retries: 5

  # Redisï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ï¼‰
  redis:
    image: redis:7.2-alpine
    container_name: ai-analytics-redis
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 5s
      retries: 5

  # LocalStackï¼ˆAWS ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
  localstack:
    image: localstack/localstack:latest
    container_name: ai-analytics-localstack
    ports:
      - "4566:4566"
    environment:
      - SERVICES=s3,cloudfront
      - DEBUG=1
      - DATA_DIR=/tmp/localstack/data
    volumes:
      - localstack_data:/tmp/localstack
      - /var/run/docker.sock:/var/run/docker.sock

  # Mailhogï¼ˆé–‹ç™ºç”¨ãƒ¡ãƒ¼ãƒ«ã‚µãƒ¼ãƒãƒ¼ï¼‰
  mailhog:
    image: mailhog/mailhog:latest
    container_name: ai-analytics-mailhog
    ports:
      - "1025:1025"  # SMTP
      - "8025:8025"  # Web UI

volumes:
  postgres_data:
  redis_data:
  localstack_data:
```

### 2. Dockerã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•
```bash
# ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•
docker-compose up -d

# ç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹ã®ã¿èµ·å‹•
docker-compose up -d postgres redis

# ãƒ­ã‚°ã®ç¢ºèª
docker-compose logs -f

# ã‚µãƒ¼ãƒ“ã‚¹ã®åœæ­¢
docker-compose down

# ãƒ‡ãƒ¼ã‚¿ã‚‚å«ã‚ã¦å®Œå…¨ã«å‰Šé™¤
docker-compose down -v
```

### 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–
```bash
# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®å®Ÿè¡Œ
npm run db:migrate

# ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥ï¼ˆé–‹ç™ºç”¨ãƒ‡ãƒ¼ã‚¿ï¼‰
npm run db:seed

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ¥ç¶šã—ã¦ç¢ºèª
docker exec -it ai-analytics-postgres psql -U analytics -d analytics_dev
```

---

## VSCode ã®è¨­å®š

### 1. æ¨å¥¨æ‹¡å¼µæ©Ÿèƒ½
**.vscode/extensions.json**
```json
{
  "recommendations": [
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode",
    "ms-vscode.vscode-typescript-next",
    "bradlc.vscode-tailwindcss",
    "dsznajder.es7-react-js-snippets",
    "prisma.prisma",
    "ms-python.python",
    "ms-azuretools.vscode-docker",
    "GitHub.copilot",
    "eamodio.gitlens",
    "christian-kohler.path-intellisense",
    "formulahendry.auto-rename-tag",
    "steoates.autoimport",
    "wix.vscode-import-cost",
    "kamikillerto.vscode-colorize",
    "oderwat.indent-rainbow"
  ]
}
```

### 2. VSCode è¨­å®š
**.vscode/settings.json**
```json
{
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true,
    "source.organizeImports": true
  },
  "editor.tabSize": 2,
  "editor.rulers": [80, 120],
  "editor.bracketPairColorization.enabled": true,
  "editor.guides.bracketPairs": true,
  
  "files.autoSave": "onFocusChange",
  "files.trimTrailingWhitespace": true,
  "files.insertFinalNewline": true,
  
  "typescript.updateImportsOnFileMove.enabled": "always",
  "typescript.preferences.importModuleSpecifier": "relative",
  
  "eslint.validate": [
    "javascript",
    "javascriptreact",
    "typescript",
    "typescriptreact"
  ],
  
  "tailwindCSS.includeLanguages": {
    "typescript": "javascript",
    "typescriptreact": "javascript"
  },
  
  "[python]": {
    "editor.defaultFormatter": "ms-python.black-formatter",
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
      "source.organizeImports": true
    }
  },
  
  "git.autofetch": true,
  "git.confirmSync": false,
  
  "terminal.integrated.env.osx": {
    "FIG_NEW_SESSION": "1"
  }
}
```

### 3. ãƒ‡ãƒãƒƒã‚°è¨­å®š
**.vscode/launch.json**
```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Next.js: debug",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/frontend/node_modules/.bin/next",
      "args": ["dev"],
      "cwd": "${workspaceFolder}/frontend",
      "env": {
        "NODE_OPTIONS": "--inspect"
      },
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": ["<node_internals>/**"]
    },
    {
      "name": "Node.js: debug backend",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/backend/src/server.js",
      "cwd": "${workspaceFolder}/backend",
      "restart": true,
      "env": {
        "NODE_ENV": "development"
      },
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen"
    },
    {
      "name": "Python: Flask",
      "type": "python",
      "request": "launch",
      "module": "flask",
      "env": {
        "FLASK_APP": "app.py",
        "FLASK_ENV": "development"
      },
      "args": ["run", "--no-debugger"],
      "jinja": true,
      "cwd": "${workspaceFolder}/ai-engine"
    },
    {
      "name": "Jest: current file",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/node_modules/.bin/jest",
      "args": ["${fileBasename}", "--coverage=false"],
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen"
    }
  ],
  "compounds": [
    {
      "name": "Full Stack",
      "configurations": ["Next.js: debug", "Node.js: debug backend"],
      "stopAll": true
    }
  ]
}
```

---

## é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

### 1. å€‹åˆ¥èµ·å‹•
```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆNext.jsï¼‰
cd frontend
npm run dev
# http://localhost:3000 ã§ã‚¢ã‚¯ã‚»ã‚¹

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆNode.jsï¼‰
cd backend
npm run dev
# http://localhost:3001 ã§APIã‚¢ã‚¯ã‚»ã‚¹

# AIåˆ†æã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆPythonï¼‰
cd ai-engine
source venv/bin/activate  # Windowsã®å ´åˆ: venv\Scripts\activate
python app.py
# http://localhost:5000 ã§ã‚¢ã‚¯ã‚»ã‚¹
```

### 2. ä¸€æ‹¬èµ·å‹•ï¼ˆæ¨å¥¨ï¼‰
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œ
npm run dev:all

# ã¾ãŸã¯å„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¿ãƒ–ã§å€‹åˆ¥ã«èµ·å‹•
```

### 3. èµ·å‹•ç¢ºèª
ä»¥ä¸‹ã®URLã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦å‹•ä½œç¢ºèªï¼š
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: http://localhost:3000
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API: http://localhost:3001/api/health
- AIåˆ†æã‚¨ãƒ³ã‚¸ãƒ³: http://localhost:5000/health
- Mailhog: http://localhost:8025
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†: pgAdminç­‰ã§ localhost:5432 ã«æ¥ç¶š

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### 1. npm install ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
npm cache clean --force

# node_modulesã‚’å‰Šé™¤ã—ã¦å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf node_modules package-lock.json
npm install
```

#### 2. ãƒãƒ¼ãƒˆãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹
```bash
# ä½¿ç”¨ä¸­ã®ãƒãƒ¼ãƒˆã‚’ç¢ºèªï¼ˆMac/Linuxï¼‰
lsof -i :3000
lsof -i :3001
lsof -i :5432

# ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†
kill -9 <PID>

# Windowsã®å ´åˆ
netstat -ano | findstr :3000
taskkill /PID <PID> /F
```

#### 3. Dockerã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ãªã„
```bash
# Dockerã‚µãƒ¼ãƒ“ã‚¹ã®ç¢ºèª
docker info

# ã‚³ãƒ³ãƒ†ãƒŠã®çŠ¶æ…‹ç¢ºèª
docker ps -a

# ãƒ­ã‚°ç¢ºèª
docker logs ai-analytics-postgres

# å…¨ã¦ãƒªã‚»ãƒƒãƒˆ
docker-compose down -v
docker system prune -a
docker-compose up -d
```

#### 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼
```bash
# PostgreSQLã®èµ·å‹•ç¢ºèª
docker exec ai-analytics-postgres pg_isready

# æ¥ç¶šãƒ†ã‚¹ãƒˆ
docker exec -it ai-analytics-postgres psql -U analytics -d analytics_dev -c "SELECT 1"

# ç’°å¢ƒå¤‰æ•°ã®ç¢ºèª
echo $DATABASE_URL
```

---

## é–‹ç™ºã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. ãƒ–ãƒ©ãƒ³ãƒé‹ç”¨
```bash
# æ–°æ©Ÿèƒ½ã®é–‹ç™º
git checkout -b feature/add-new-dashboard

# ãƒã‚°ä¿®æ­£
git checkout -b fix/data-collection-error

# ä½œæ¥­å‰ã«æœ€æ–°ã‚’å–å¾—
git checkout develop
git pull origin develop
git checkout -b feature/your-feature
```

### 2. ã‚³ãƒŸãƒƒãƒˆå‰ã®ç¢ºèª
```bash
# ESLintãƒã‚§ãƒƒã‚¯
npm run lint

# TypeScriptãƒã‚§ãƒƒã‚¯
npm run type-check

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test

# å…¨ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
npm run validate
```

### 3. ä¾¿åˆ©ãªã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®š
```bash
# ~/.zshrc or ~/.bashrc ã«è¿½åŠ 
alias dc='docker-compose'
alias dcup='docker-compose up -d'
alias dcdown='docker-compose down'
alias dclogs='docker-compose logs -f'
alias nr='npm run'
alias nrd='npm run dev'
alias nrt='npm run test'
```

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ç’°å¢ƒæ§‹ç¯‰ãŒå®Œäº†ã—ãŸã‚‰ã€ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š

1. **é–‹ç™ºãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ_è©³ç´°ä»•æ§˜.md** - é–‹ç™ºã‚¿ã‚¹ã‚¯ã¨ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
2. **è¦ä»¶å®šç¾©æ›¸_AIã‚¦ã‚§ãƒ–åˆ†æã‚·ã‚¹ãƒ†ãƒ .md** - ã‚·ã‚¹ãƒ†ãƒ ã®è©³ç´°ä»•æ§˜
3. **APIä»•æ§˜æ›¸** - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã®è©³ç´°

è³ªå•ã‚„å•é¡ŒãŒã‚ã‚‹å ´åˆã¯ã€ãƒãƒ¼ãƒ ã®Slackãƒãƒ£ãƒ³ãƒãƒ«ã¾ãŸã¯GitHub Issuesã§ç›¸è«‡ã—ã¦ãã ã•ã„ã€‚

Happy Coding! ğŸš€