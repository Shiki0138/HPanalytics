# AIã‚¦ã‚§ãƒ–åˆ†æã‚·ã‚¹ãƒ†ãƒ  ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ãƒ»å“è³ªç®¡ç†ã‚¬ã‚¤ãƒ‰

## ç›®æ¬¡
1. [ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„](#1-ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„)
2. [ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼é˜²æ­¢ç­–](#2-ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼é˜²æ­¢ç­–)
3. [å“è³ªç®¡ç†ãƒ—ãƒ­ã‚»ã‚¹](#3-å“è³ªç®¡ç†ãƒ—ãƒ­ã‚»ã‚¹)
4. [è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ«è¨­å®š](#4-è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ«è¨­å®š)
5. [ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](#5-ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³)

---

## 1. ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### 1.1 JavaScript/TypeScript è¦ç´„

#### å‘½åè¦å‰‡
```typescript
// âœ… è‰¯ã„ä¾‹
// å¤‰æ•°ãƒ»é–¢æ•°: camelCase
const userName = 'John Doe';
const calculateTotalPrice = (items: Item[]) => {};

// å®šæ•°: UPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3;
const API_BASE_URL = 'https://api.example.com';

// ã‚¯ãƒ©ã‚¹ãƒ»å‹ãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹: PascalCase
class UserAnalytics {}
type UserData = {};
interface IApiResponse {}

// ãƒ•ã‚¡ã‚¤ãƒ«å
// - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: PascalCase.tsx
// - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£: camelCase.ts
// - å®šæ•°: constants.ts
// - å‹å®šç¾©: types.ts

// âŒ æ‚ªã„ä¾‹
const user_name = 'John';  // snake_case ã¯ä½¿ã‚ãªã„
const getdata = () => {};   // æ„å‘³ã®ã‚ã‚‹åå‰ã«ã™ã‚‹
const temp = {};            // ä¸€æ™‚å¤‰æ•°ã§ã‚‚æ„å‘³ã®ã‚ã‚‹åå‰ã‚’
```

#### é–¢æ•°ã®æ›¸ãæ–¹
```typescript
// âœ… è‰¯ã„ä¾‹: æ˜ç¢ºãªå‹å®šç¾©ã¨å˜ä¸€è²¬ä»»
interface UserStats {
  pageViews: number;
  sessions: number;
  bounceRate: number;
}

async function fetchUserStats(userId: string, dateRange: DateRange): Promise<UserStats> {
  try {
    const response = await api.get(`/users/${userId}/stats`, {
      params: { startDate: dateRange.start, endDate: dateRange.end }
    });
    
    return {
      pageViews: response.data.pageViews,
      sessions: response.data.sessions,
      bounceRate: response.data.bounceRate
    };
  } catch (error) {
    logger.error('Failed to fetch user stats', { userId, error });
    throw new ApiError('ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ', error);
  }
}

// âŒ æ‚ªã„ä¾‹: å‹å®šç¾©ãªã—ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãªã—
function getUserData(id) {
  return fetch(`/api/users/${id}`).then(res => res.json());
}
```

#### æ¡ä»¶åˆ†å²ã¨ã‚¬ãƒ¼ãƒ‰å¥
```typescript
// âœ… è‰¯ã„ä¾‹: æ—©æœŸãƒªã‚¿ãƒ¼ãƒ³ã§ãƒã‚¹ãƒˆã‚’æ¸›ã‚‰ã™
function processUserData(user: User | null): ProcessedData | null {
  // ã‚¬ãƒ¼ãƒ‰å¥ã§ç•°å¸¸ç³»ã‚’å…ˆã«å‡¦ç†
  if (!user) {
    logger.warn('User is null');
    return null;
  }
  
  if (!user.isActive) {
    logger.info('User is not active', { userId: user.id });
    return null;
  }
  
  // ãƒ¡ã‚¤ãƒ³ã®å‡¦ç†
  return {
    id: user.id,
    name: user.name,
    lastActive: user.lastLoginAt
  };
}

// âŒ æ‚ªã„ä¾‹: æ·±ã„ãƒã‚¹ãƒˆ
function processUserData(user: User | null) {
  if (user) {
    if (user.isActive) {
      return {
        id: user.id,
        name: user.name
      };
    } else {
      return null;
    }
  } else {
    return null;
  }
}
```

### 1.2 React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¦ç´„

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ 
```tsx
// âœ… è‰¯ã„ä¾‹: æ˜ç¢ºãªæ§‹é€ ã¨å‹å®šç¾©
import React, { useState, useEffect, useCallback, memo } from 'react';
import { Box, Typography, CircularProgress } from '@mui/material';
import { useAnalytics } from '@/hooks/useAnalytics';
import { MetricCard } from '@/components/MetricCard';
import type { DashboardProps, Metric } from '@/types';

export const Dashboard: React.FC<DashboardProps> = memo(({ userId, timeRange }) => {
  // 1. Stateå®šç¾©ï¼ˆé–¢é€£ã™ã‚‹ã‚‚ã®ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ï¼‰
  const [metrics, setMetrics] = useState<Metric[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<Error | null>(null);
  
  // 2. ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®ä½¿ç”¨
  const { fetchMetrics } = useAnalytics();
  
  // 3. useCallbackã§ãƒ¡ãƒ¢åŒ–
  const loadMetrics = useCallback(async () => {
    try {
      setLoading(true);
      const data = await fetchMetrics(userId, timeRange);
      setMetrics(data);
    } catch (err) {
      setError(err as Error);
    } finally {
      setLoading(false);
    }
  }, [userId, timeRange, fetchMetrics]);
  
  // 4. useEffectã¯æœ€å°é™ã®ä¾å­˜é–¢ä¿‚
  useEffect(() => {
    loadMetrics();
  }, [loadMetrics]);
  
  // 5. æ¡ä»¶ä»˜ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
  if (loading) {
    return (
      <Box display="flex" justifyContent="center" p={4}>
        <CircularProgress />
      </Box>
    );
  }
  
  if (error) {
    return (
      <Box p={4}>
        <Typography color="error">
          ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {error.message}
        </Typography>
      </Box>
    );
  }
  
  // 6. ãƒ¡ã‚¤ãƒ³ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
  return (
    <Box p={3}>
      <Typography variant="h4" mb={3}>
        ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
      </Typography>
      <Box display="grid" gridTemplateColumns="repeat(auto-fit, minmax(250px, 1fr))" gap={3}>
        {metrics.map(metric => (
          <MetricCard key={metric.id} metric={metric} />
        ))}
      </Box>
    </Box>
  );
});

Dashboard.displayName = 'Dashboard';
```

#### ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®ä½œæˆ
```typescript
// âœ… è‰¯ã„ä¾‹: å†åˆ©ç”¨å¯èƒ½ãªãƒ­ã‚¸ãƒƒã‚¯ã®æŠ½å‡º
import { useState, useEffect, useCallback } from 'react';
import { analyticsApi } from '@/services/api';
import type { AnalyticsData, TimeRange } from '@/types';

export function useAnalytics(siteId: string) {
  const [data, setData] = useState<AnalyticsData | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<Error | null>(null);
  
  const fetchData = useCallback(async (timeRange: TimeRange) => {
    try {
      setLoading(true);
      setError(null);
      const response = await analyticsApi.getAnalytics(siteId, timeRange);
      setData(response.data);
    } catch (err) {
      setError(err as Error);
    } finally {
      setLoading(false);
    }
  }, [siteId]);
  
  const refetch = useCallback(() => {
    if (data?.timeRange) {
      fetchData(data.timeRange);
    }
  }, [data, fetchData]);
  
  return {
    data,
    loading,
    error,
    fetchData,
    refetch
  };
}
```

### 1.3 CSS/ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°è¦ç´„

#### CSS Modules ã®ä½¿ç”¨
```scss
// Dashboard.module.scss
.container {
  padding: 24px;
  background-color: var(--bg-primary);
  
  @media (max-width: 768px) {
    padding: 16px;
  }
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  
  &__title {
    font-size: 24px;
    font-weight: 600;
    color: var(--text-primary);
  }
  
  &__actions {
    display: flex;
    gap: 12px;
  }
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 24px;
  
  &--compact {
    gap: 16px;
  }
}
```

#### Emotion/styled-components ã®ä½¿ç”¨
```tsx
// âœ… è‰¯ã„ä¾‹: ãƒ†ãƒ¼ãƒã¨propsã‚’æ´»ç”¨
import styled from '@emotion/styled';
import { css } from '@emotion/react';

interface CardProps {
  variant?: 'default' | 'highlighted';
  isClickable?: boolean;
}

export const Card = styled.div<CardProps>`
  padding: ${({ theme }) => theme.spacing(3)};
  background-color: ${({ theme }) => theme.palette.background.paper};
  border-radius: ${({ theme }) => theme.shape.borderRadius}px;
  box-shadow: ${({ theme }) => theme.shadows[1]};
  transition: all 0.2s ease-in-out;
  
  ${({ variant, theme }) => variant === 'highlighted' && css`
    border: 2px solid ${theme.palette.primary.main};
    background-color: ${theme.palette.primary.light};
  `}
  
  ${({ isClickable }) => isClickable && css`
    cursor: pointer;
    
    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
  `}
`;
```

---

## 2. ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼é˜²æ­¢ç­–

### 2.1 Pre-commit ãƒ•ãƒƒã‚¯ã®è¨­å®š

#### Husky + lint-staged
```json
// package.json
{
  "scripts": {
    "prepare": "husky install",
    "pre-commit": "lint-staged"
  },
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{json,md,yml}": [
      "prettier --write"
    ],
    "*.{css,scss}": [
      "stylelint --fix",
      "prettier --write"
    ]
  }
}
```

#### .husky/pre-commit
```bash
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# å‹ãƒã‚§ãƒƒã‚¯
echo "ğŸ” å‹ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™..."
npm run type-check
if [ $? -ne 0 ]; then
  echo "âŒ TypeScriptã®å‹ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚"
  exit 1
fi

# ESLint
echo "ğŸ” ESLintãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™..."
npm run lint
if [ $? -ne 0 ]; then
  echo "âŒ ESLintã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚"
  exit 1
fi

# ãƒ†ã‚¹ãƒˆ
echo "ğŸ§ª ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™..."
npm run test -- --passWithNoTests
if [ $? -ne 0 ]; then
  echo "âŒ ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¾ã—ãŸã€‚ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚"
  exit 1
fi

# ãƒ“ãƒ«ãƒ‰ç¢ºèª
echo "ğŸ—ï¸  ãƒ“ãƒ«ãƒ‰ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™..."
npm run build
if [ $? -ne 0 ]; then
  echo "âŒ ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚"
  exit 1
fi

echo "âœ… ã™ã¹ã¦ã®ãƒã‚§ãƒƒã‚¯ãŒæˆåŠŸã—ã¾ã—ãŸï¼"
```

### 2.2 TypeScript å³æ ¼è¨­å®š

```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "esnext",
    "jsx": "react-jsx",
    
    // å‹ãƒã‚§ãƒƒã‚¯ã®å³æ ¼åŒ–
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "strictFunctionTypes": true,
    "strictBindCallApply": true,
    "strictPropertyInitialization": true,
    "noImplicitThis": true,
    "alwaysStrict": true,
    
    // è¿½åŠ ã®ãƒã‚§ãƒƒã‚¯
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedIndexedAccess": true,
    "noImplicitOverride": true,
    "noPropertyAccessFromIndexSignature": true,
    
    // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è§£æ±º
    "moduleResolution": "node",
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"]
    },
    "resolveJsonModule": true,
    "allowJs": true,
    "checkJs": false,
    
    // å‡ºåŠ›è¨­å®š
    "noEmit": true,
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,
    "skipLibCheck": true,
    "isolatedModules": true,
    "incremental": true
  },
  "include": ["src/**/*", "types/**/*"],
  "exclude": ["node_modules", "build", "dist"]
}
```

### 2.3 ã‚¨ãƒ©ãƒ¼äºˆé˜²ã®ãŸã‚ã®å‹å®šç¾©

```typescript
// types/common.ts
// âœ… è‰¯ã„ä¾‹: å³æ ¼ãªå‹å®šç¾©

// ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹
export type Nullable<T> = T | null;
export type Optional<T> = T | undefined;
export type AsyncReturnType<T extends (...args: any) => Promise<any>> = 
  T extends (...args: any) => Promise<infer R> ? R : never;

// å…±é€šã®å‹å®šç¾©
export interface ApiResponse<T> {
  success: boolean;
  data: T;
  error?: {
    code: string;
    message: string;
    details?: unknown;
  };
  metadata?: {
    timestamp: string;
    version: string;
  };
}

// å³æ ¼ãªã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼å‹
export type ClickHandler<T = HTMLElement> = (event: React.MouseEvent<T>) => void;
export type ChangeHandler<T = HTMLInputElement> = (event: React.ChangeEvent<T>) => void;
export type SubmitHandler = (event: React.FormEvent<HTMLFormElement>) => void;

// APIã‚¨ãƒ©ãƒ¼ã®å‹å®šç¾©
export class ApiError extends Error {
  constructor(
    message: string,
    public code: string,
    public statusCode: number,
    public details?: unknown
  ) {
    super(message);
    this.name = 'ApiError';
  }
}

// å‹ã‚¬ãƒ¼ãƒ‰é–¢æ•°
export function isApiError(error: unknown): error is ApiError {
  return error instanceof ApiError;
}

export function isNotNull<T>(value: T | null): value is T {
  return value !== null;
}

export function isDefined<T>(value: T | undefined): value is T {
  return value !== undefined;
}
```

---

## 3. å“è³ªç®¡ç†ãƒ—ãƒ­ã‚»ã‚¹

### 3.1 ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

#### å˜ä½“ãƒ†ã‚¹ãƒˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
```typescript
// UserAnalytics.test.ts
import { render, screen, waitFor, fireEvent } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { UserAnalytics } from './UserAnalytics';
import { analyticsApi } from '@/services/api';
import { mockAnalyticsData } from '@/test/fixtures';

// ãƒ¢ãƒƒã‚¯ã®è¨­å®š
jest.mock('@/services/api');
const mockedApi = analyticsApi as jest.Mocked<typeof analyticsApi>;

describe('UserAnalytics', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });
  
  describe('ãƒ‡ãƒ¼ã‚¿å–å¾—', () => {
    it('åˆæœŸãƒ­ãƒ¼ãƒ‰æ™‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹', async () => {
      // Arrange
      mockedApi.getUserAnalytics.mockResolvedValueOnce({
        data: mockAnalyticsData
      });
      
      // Act
      render(<UserAnalytics userId="user123" />);
      
      // Assert
      expect(screen.getByTestId('loading-spinner')).toBeInTheDocument();
      
      await waitFor(() => {
        expect(screen.queryByTestId('loading-spinner')).not.toBeInTheDocument();
      });
      
      expect(mockedApi.getUserAnalytics).toHaveBeenCalledWith('user123', {
        startDate: expect.any(String),
        endDate: expect.any(String)
      });
      
      expect(screen.getByText('ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼: 1,234')).toBeInTheDocument();
    });
    
    it('ã‚¨ãƒ©ãƒ¼æ™‚ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹', async () => {
      // Arrange
      const errorMessage = 'ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ';
      mockedApi.getUserAnalytics.mockRejectedValueOnce(
        new Error(errorMessage)
      );
      
      // Act
      render(<UserAnalytics userId="user123" />);
      
      // Assert
      await waitFor(() => {
        expect(screen.getByText(errorMessage)).toBeInTheDocument();
      });
      
      expect(screen.queryByTestId('analytics-data')).not.toBeInTheDocument();
    });
  });
  
  describe('ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³', () => {
    it('ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒœã‚¿ãƒ³ã§ãƒ‡ãƒ¼ã‚¿ã‚’å†å–å¾—ã™ã‚‹', async () => {
      // Arrange
      mockedApi.getUserAnalytics.mockResolvedValue({
        data: mockAnalyticsData
      });
      
      render(<UserAnalytics userId="user123" />);
      
      await waitFor(() => {
        expect(screen.getByTestId('analytics-data')).toBeInTheDocument();
      });
      
      // Act
      const refreshButton = screen.getByRole('button', { name: 'æ›´æ–°' });
      await userEvent.click(refreshButton);
      
      // Assert
      expect(mockedApi.getUserAnalytics).toHaveBeenCalledTimes(2);
    });
  });
});
```

#### çµ±åˆãƒ†ã‚¹ãƒˆã®ä¾‹
```typescript
// api.integration.test.ts
import { createTestServer } from '@/test/utils';
import { createTestDatabase } from '@/test/database';
import request from 'supertest';

describe('Analytics API Integration', () => {
  let server: any;
  let db: any;
  
  beforeAll(async () => {
    db = await createTestDatabase();
    server = await createTestServer(db);
  });
  
  afterAll(async () => {
    await db.close();
    await server.close();
  });
  
  describe('POST /api/analytics/track', () => {
    it('æ­£å¸¸ãªãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘ä»˜ã‘ã‚‹', async () => {
      // Arrange
      const trackingData = {
        eventType: 'pageview',
        url: 'https://example.com/products',
        timestamp: new Date().toISOString(),
        sessionId: 'session123'
      };
      
      // Act
      const response = await request(server)
        .post('/api/analytics/track')
        .set('X-Tracking-ID', 'valid-tracking-id')
        .send(trackingData);
      
      // Assert
      expect(response.status).toBe(200);
      expect(response.body).toEqual({
        success: true,
        eventId: expect.any(String)
      });
      
      // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
      const savedEvent = await db.collection('events').findOne({
        sessionId: 'session123'
      });
      
      expect(savedEvent).toMatchObject({
        eventType: 'pageview',
        url: 'https://example.com/products'
      });
    });
    
    it('ä¸æ­£ãªãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°IDã‚’æ‹’å¦ã™ã‚‹', async () => {
      // Act
      const response = await request(server)
        .post('/api/analytics/track')
        .set('X-Tracking-ID', 'invalid-id')
        .send({});
      
      // Assert
      expect(response.status).toBe(401);
      expect(response.body.error.code).toBe('INVALID_TRACKING_ID');
    });
  });
});
```

### 3.2 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

```typescript
// utils/performance.ts
export class PerformanceMonitor {
  private marks: Map<string, number> = new Map();
  
  mark(name: string): void {
    this.marks.set(name, performance.now());
  }
  
  measure(name: string, startMark: string, endMark?: string): number {
    const start = this.marks.get(startMark);
    if (!start) {
      throw new Error(`Mark ${startMark} not found`);
    }
    
    const end = endMark ? this.marks.get(endMark) : performance.now();
    if (!end) {
      throw new Error(`Mark ${endMark} not found`);
    }
    
    const duration = end - start;
    
    // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è­¦å‘Š
    if (duration > 1000) {
      console.warn(`Performance warning: ${name} took ${duration.toFixed(2)}ms`);
    }
    
    // ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®é€ä¿¡ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
    if (process.env.NODE_ENV === 'production') {
      this.sendMetrics(name, duration);
    }
    
    return duration;
  }
  
  private sendMetrics(name: string, duration: number): void {
    // Analytics APIã«é€ä¿¡
    if (window.analytics) {
      window.analytics.track('Performance Metric', {
        metric: name,
        duration,
        url: window.location.href,
        userAgent: navigator.userAgent
      });
    }
  }
}

// ä½¿ç”¨ä¾‹
export function measureApiCall<T>(
  name: string,
  apiCall: () => Promise<T>
): Promise<T> {
  const monitor = new PerformanceMonitor();
  monitor.mark(`${name}-start`);
  
  return apiCall()
    .then(result => {
      monitor.measure(name, `${name}-start`);
      return result;
    })
    .catch(error => {
      monitor.measure(`${name}-error`, `${name}-start`);
      throw error;
    });
}
```

### 3.3 ã‚¨ãƒ©ãƒ¼ç›£è¦–ã¨ãƒ­ã‚®ãƒ³ã‚°

```typescript
// utils/logger.ts
import * as Sentry from '@sentry/react';

export enum LogLevel {
  DEBUG = 'debug',
  INFO = 'info',
  WARN = 'warn',
  ERROR = 'error'
}

interface LogContext {
  userId?: string;
  sessionId?: string;
  [key: string]: any;
}

class Logger {
  private isDevelopment = process.env.NODE_ENV === 'development';
  
  private log(level: LogLevel, message: string, context?: LogContext): void {
    const timestamp = new Date().toISOString();
    const logEntry = {
      timestamp,
      level,
      message,
      ...context
    };
    
    // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ï¼ˆé–‹ç™ºç’°å¢ƒï¼‰
    if (this.isDevelopment) {
      console[level](message, context);
    }
    
    // Sentryã¸ã®é€ä¿¡ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
    if (!this.isDevelopment && level === LogLevel.ERROR) {
      Sentry.captureException(new Error(message), {
        level: 'error',
        extra: context
      });
    }
    
    // æ§‹é€ åŒ–ãƒ­ã‚°ã®é€ä¿¡
    this.sendToLogService(logEntry);
  }
  
  private sendToLogService(logEntry: any): void {
    // CloudWatch Logs ã‚„ Datadog ãªã©ã¸ã®é€ä¿¡
    if (window.navigator.sendBeacon) {
      window.navigator.sendBeacon(
        '/api/logs',
        JSON.stringify(logEntry)
      );
    }
  }
  
  debug(message: string, context?: LogContext): void {
    this.log(LogLevel.DEBUG, message, context);
  }
  
  info(message: string, context?: LogContext): void {
    this.log(LogLevel.INFO, message, context);
  }
  
  warn(message: string, context?: LogContext): void {
    this.log(LogLevel.WARN, message, context);
  }
  
  error(message: string, error?: Error, context?: LogContext): void {
    const errorContext = {
      ...context,
      errorMessage: error?.message,
      errorStack: error?.stack,
      errorName: error?.name
    };
    
    this.log(LogLevel.ERROR, message, errorContext);
  }
}

export const logger = new Logger();

// ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªãƒ¼ã®å®Ÿè£…
export class ErrorBoundary extends React.Component<
  { children: React.ReactNode },
  { hasError: boolean }
> {
  constructor(props: { children: React.ReactNode }) {
    super(props);
    this.state = { hasError: false };
  }
  
  static getDerivedStateFromError(): { hasError: boolean } {
    return { hasError: true };
  }
  
  componentDidCatch(error: Error, errorInfo: React.ErrorInfo): void {
    logger.error('React Error Boundary caught an error', error, {
      componentStack: errorInfo.componentStack
    });
  }
  
  render() {
    if (this.state.hasError) {
      return (
        <div className="error-fallback">
          <h2>ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚</h2>
          <button onClick={() => window.location.reload()}>
            ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿
          </button>
        </div>
      );
    }
    
    return this.props.children;
  }
}
```

---

## 4. è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ«è¨­å®š

### 4.1 ESLint è©³ç´°è¨­å®š

```javascript
// .eslintrc.js
module.exports = {
  root: true,
  parser: '@typescript-eslint/parser',
  parserOptions: {
    ecmaVersion: 2022,
    sourceType: 'module',
    ecmaFeatures: {
      jsx: true
    },
    project: './tsconfig.json'
  },
  env: {
    browser: true,
    es2022: true,
    node: true,
    jest: true
  },
  extends: [
    'eslint:recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:@typescript-eslint/recommended-requiring-type-checking',
    'plugin:react/recommended',
    'plugin:react-hooks/recommended',
    'plugin:jsx-a11y/recommended',
    'plugin:import/errors',
    'plugin:import/warnings',
    'plugin:import/typescript',
    'plugin:jest/recommended',
    'plugin:testing-library/react',
    'plugin:cypress/recommended',
    'prettier'
  ],
  plugins: [
    '@typescript-eslint',
    'react',
    'react-hooks',
    'jsx-a11y',
    'import',
    'jest',
    'testing-library',
    'cypress'
  ],
  settings: {
    react: {
      version: 'detect'
    },
    'import/resolver': {
      typescript: {
        alwaysTryTypes: true
      }
    }
  },
  rules: {
    // TypeScript
    '@typescript-eslint/explicit-function-return-type': ['error', {
      allowExpressions: true,
      allowTypedFunctionExpressions: true
    }],
    '@typescript-eslint/no-unused-vars': ['error', {
      argsIgnorePattern: '^_',
      varsIgnorePattern: '^_'
    }],
    '@typescript-eslint/no-explicit-any': 'error',
    '@typescript-eslint/no-non-null-assertion': 'error',
    '@typescript-eslint/strict-boolean-expressions': ['error', {
      allowString: false,
      allowNumber: false
    }],
    
    // React
    'react/prop-types': 'off',
    'react/react-in-jsx-scope': 'off',
    'react/jsx-uses-react': 'off',
    'react-hooks/rules-of-hooks': 'error',
    'react-hooks/exhaustive-deps': 'warn',
    
    // Import
    'import/order': ['error', {
      groups: [
        'builtin',
        'external',
        'internal',
        'parent',
        'sibling',
        'index',
        'object',
        'type'
      ],
      'newlines-between': 'always',
      alphabetize: {
        order: 'asc',
        caseInsensitive: true
      }
    }],
    'import/no-duplicates': 'error',
    'import/no-cycle': 'error',
    
    // ä¸€èˆ¬
    'no-console': ['warn', { allow: ['warn', 'error'] }],
    'no-debugger': 'error',
    'no-alert': 'error',
    'prefer-const': 'error',
    'no-var': 'error',
    'object-shorthand': 'error',
    'prefer-template': 'error',
    'prefer-destructuring': ['error', {
      array: true,
      object: true
    }],
    
    // ã‚³ãƒ¼ãƒ‰ã®è¤‡é›‘ã•
    'complexity': ['error', 10],
    'max-depth': ['error', 3],
    'max-lines': ['error', {
      max: 300,
      skipBlankLines: true,
      skipComments: true
    }],
    'max-lines-per-function': ['error', {
      max: 50,
      skipBlankLines: true,
      skipComments: true
    }]
  },
  overrides: [
    {
      files: ['**/*.test.ts', '**/*.test.tsx'],
      rules: {
        '@typescript-eslint/no-explicit-any': 'off',
        'max-lines-per-function': 'off'
      }
    }
  ]
};
```

### 4.2 Prettier è¨­å®š

```javascript
// .prettierrc.js
module.exports = {
  // åŸºæœ¬è¨­å®š
  printWidth: 100,
  tabWidth: 2,
  useTabs: false,
  semi: true,
  singleQuote: true,
  quoteProps: 'as-needed',
  jsxSingleQuote: false,
  trailingComma: 'es5',
  bracketSpacing: true,
  bracketSameLine: false,
  arrowParens: 'avoid',
  
  // è¨€èªåˆ¥è¨­å®š
  overrides: [
    {
      files: '*.json',
      options: {
        printWidth: 80
      }
    },
    {
      files: '*.md',
      options: {
        proseWrap: 'always'
      }
    },
    {
      files: ['*.yml', '*.yaml'],
      options: {
        singleQuote: false
      }
    }
  ]
};
```

### 4.3 Jest è¨­å®š

```javascript
// jest.config.js
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'jsdom',
  roots: ['<rootDir>/src'],
  testMatch: [
    '**/__tests__/**/*.+(ts|tsx|js)',
    '**/?(*.)+(spec|test).+(ts|tsx|js)'
  ],
  transform: {
    '^.+\\.(ts|tsx)$': ['ts-jest', {
      tsconfig: {
        jsx: 'react'
      }
    }]
  },
  moduleNameMapper: {
    '^@/(.*)$': '<rootDir>/src/$1',
    '\\.(css|less|scss|sass)$': 'identity-obj-proxy',
    '\\.(jpg|jpeg|png|gif|svg)$': '<rootDir>/__mocks__/fileMock.js'
  },
  setupFilesAfterEnv: ['<rootDir>/src/test/setup.ts'],
  collectCoverageFrom: [
    'src/**/*.{ts,tsx}',
    '!src/**/*.d.ts',
    '!src/**/*.stories.tsx',
    '!src/test/**/*'
  ],
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80
    }
  },
  globals: {
    'ts-jest': {
      isolatedModules: true
    }
  }
};
```

---

## 5. ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### 5.1 ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

```markdown
## ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ»è¨­è¨ˆ
- [ ] å˜ä¸€è²¬ä»»ã®åŸå‰‡ã«å¾“ã£ã¦ã„ã‚‹ã‹
- [ ] é©åˆ‡ãªæŠ½è±¡åŒ–ãƒ¬ãƒ™ãƒ«ã‹
- [ ] å†åˆ©ç”¨å¯èƒ½ãªè¨­è¨ˆã‹
- [ ] å°†æ¥ã®æ‹¡å¼µæ€§ã‚’è€ƒæ…®ã—ã¦ã„ã‚‹ã‹

### ğŸ’» ã‚³ãƒ¼ãƒ‰å“è³ª
- [ ] å‘½åè¦å‰‡ã«å¾“ã£ã¦ã„ã‚‹ã‹
- [ ] ä¸è¦ãªã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆãŒãªã„ã‹
- [ ] ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ãŒå®šæ•°åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] é‡è¤‡ã‚³ãƒ¼ãƒ‰ãŒãªã„ã‹
- [ ] è¤‡é›‘åº¦ãŒé©åˆ‡ã‹ï¼ˆå¾ªç’°çš„è¤‡é›‘åº¦ < 10ï¼‰

### ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- [ ] å…¥åŠ›å€¤ã®æ¤œè¨¼ãŒé©åˆ‡ã‹
- [ ] SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ãŒã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] XSSå¯¾ç­–ãŒã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] èªè¨¼ãƒ»èªå¯ãŒé©åˆ‡ã‹
- [ ] ã‚»ãƒ³ã‚·ãƒ†ã‚£ãƒ–æƒ…å ±ãŒãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ãªã„ã‹

### âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- [ ] N+1å•é¡ŒãŒãªã„ã‹
- [ ] é©åˆ‡ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒãªã„ã‹
- [ ] é©åˆ‡ãªãƒ¡ãƒ¢åŒ–ãŒã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã¸ã®å½±éŸ¿ã¯å¦¥å½“ã‹

### ğŸ§ª ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ†ã‚¹ãƒˆãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ã‹
- [ ] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒç¶²ç¾…çš„ã‹
- [ ] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãŒã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ãƒ¢ãƒƒã‚¯ãŒé©åˆ‡ã‹
- [ ] ãƒ†ã‚¹ãƒˆãŒä¿å®ˆã—ã‚„ã™ã„ã‹

### ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [ ] é–¢æ•°ãƒ»ã‚¯ãƒ©ã‚¹ã«JSDocã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚‹ã‹
- [ ] è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã«èª¬æ˜ãŒã‚ã‚‹ã‹
- [ ] READMEãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ç ´å£Šçš„å¤‰æ›´ãŒæ˜è¨˜ã•ã‚Œã¦ã„ã‚‹ã‹

### ğŸ¯ ãã®ä»–
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒé©åˆ‡ã‹
- [ ] ãƒ­ã‚°å‡ºåŠ›ãŒé©åˆ‡ã‹
- [ ] å›½éš›åŒ–å¯¾å¿œãŒè€ƒæ…®ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãŒè€ƒæ…®ã•ã‚Œã¦ã„ã‚‹ã‹
```

### 5.2 ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆã®æ›¸ãæ–¹

```markdown
## è‰¯ã„ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆã®ä¾‹

### ğŸŸ¢ å»ºè¨­çš„ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
```
// ææ¡ˆ
ã“ã®ãƒ­ã‚¸ãƒƒã‚¯ã¯ `useMemo` ã§ãƒ¡ãƒ¢åŒ–ã™ã‚‹ã¨ã€ä¸è¦ãªå†è¨ˆç®—ã‚’é˜²ã’ã¾ã™ï¼š

```typescript
const expensiveValue = useMemo(() => {
  return calculateExpensiveValue(data);
}, [data]);
```

ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒæ”¹å–„ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
```

### ğŸŸ¢ å…·ä½“çš„ãªæ”¹å–„æ¡ˆ
```
// ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®è¦³ç‚¹
ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’ç›´æ¥SQLã‚¯ã‚¨ãƒªã«å«ã‚ã‚‹ã®ã¯å±é™ºã§ã™ã€‚
ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒªã‚’ä½¿ç”¨ã—ã¾ã—ã‚‡ã†ï¼š

```typescript
// Before
db.query(`SELECT * FROM users WHERE id = ${userId}`);

// After
db.query('SELECT * FROM users WHERE id = ?', [userId]);
```
```

### ğŸ”´ é¿ã‘ã‚‹ã¹ãã‚³ãƒ¡ãƒ³ãƒˆ
```
// âŒ æ›–æ˜§
"ã“ã®ã‚³ãƒ¼ãƒ‰ã¯è‰¯ããªã„"

// âŒ å€‹äººçš„ãªå¥½ã¿
"ç§ãªã‚‰ã“ã†æ›¸ã"

// âŒ æ‰¹åˆ¤çš„
"ãªãœã“ã‚“ãªæ›¸ãæ–¹ã‚’ã—ãŸã®ï¼Ÿ"
```

### 5.3 ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾å¿œã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

```markdown
## ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾å¿œã®æµã‚Œ

1. **å…¨ã¦ã®ã‚³ãƒ¡ãƒ³ãƒˆã«è¿”ä¿¡ã™ã‚‹**
   - å¯¾å¿œã—ãŸ: "ä¿®æ­£ã—ã¾ã—ãŸ ğŸ‘"
   - è­°è«–ãŒå¿…è¦: "ã“ã®å®Ÿè£…ã«ã—ãŸç†ç”±ã¯..."
   - åˆ¥PRã§å¯¾å¿œ: "åˆ¥ã®PRã§å¯¾å¿œã—ã¾ã™ï¼ˆIssue #123ï¼‰"

2. **ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§å¯¾å¿œå†…å®¹ã‚’æ˜ç¢ºã«**
   ```
   fix: ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜äº‹é …ã®ä¿®æ­£
   
   - ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã®ä¿®æ­£
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®è¿½åŠ 
   - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è¿½åŠ 
   ```

3. **å¤§ããªå¤‰æ›´ã¯äº‹å‰ã«ç›¸è«‡**
   - Slackã§è¨­è¨ˆã«ã¤ã„ã¦è­°è«–
   - å¿…è¦ã«å¿œã˜ã¦ãƒšã‚¢ãƒ—ãƒ­/ãƒ¢ãƒ–ãƒ—ãƒ­

4. **ãƒãƒ¼ã‚¸å‰ã®æœ€çµ‚ç¢ºèª**
   - CI/CDãŒå…¨ã¦ç·‘
   - ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆãŒè§£æ±ºæ¸ˆã¿
   - ãƒ¬ãƒ“ãƒ¥ãƒ¼æ‰¿èªãŒå¿…è¦æ•°å–å¾—æ¸ˆã¿
```

---

ã“ã®å“è³ªç®¡ç†ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«å¾“ã†ã“ã¨ã§ã€é«˜å“è³ªã§ä¿å®ˆæ€§ã®é«˜ã„ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã‚’ç¶­æŒã§ãã¾ã™ã€‚