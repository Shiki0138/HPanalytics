# Staging Environment Configuration for HP Analysis System

# Application Settings
NODE_ENV=staging
PORT=8000
LOG_LEVEL=debug
API_VERSION=v1

# Database Configuration (Retrieved from AWS Secrets Manager)
# DATABASE_URL will be injected by ECS from Secrets Manager
# Format: postgresql://username:password@host:port/database

# Redis Configuration (Retrieved from AWS Secrets Manager)
# REDIS_URL will be injected by ECS from Secrets Manager
# Format: redis://auth_token@host:port

# JWT Configuration
# JWT_SECRET will be injected by ECS from Secrets Manager
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Rate Limiting (More permissive for testing)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=200
API_RATE_LIMIT_MAX=50

# CORS Configuration (Include staging domains)
CORS_ORIGINS=https://staging.hp-analysis.com,https://staging-admin.hp-analysis.com,http://localhost:3000,http://localhost:3001

# Security Settings
BCRYPT_ROUNDS=10
SESSION_SECRET_LENGTH=64
BLOCK_SUSPICIOUS_REQUESTS=false
TRUSTED_IPS=

# File Upload Settings
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf,text/csv
UPLOAD_PATH=/tmp/uploads

# Email Configuration (SES)
EMAIL_FROM=staging-noreply@hp-analysis.com
EMAIL_REPLY_TO=staging-support@hp-analysis.com
AWS_SES_REGION=us-west-2

# Monitoring and Logging
SENTRY_DSN=https://your-staging-sentry-dsn@sentry.io/staging-project-id
SENTRY_RELEASE=hp-analysis@staging
DD_API_KEY=
DD_SERVICE=hp-analysis-system-staging
DD_ENV=staging
DD_VERSION=staging

# AWS Configuration
AWS_REGION=us-west-2
AWS_S3_BUCKET_NAME=hp-analysis-staging-static-assets
AWS_S3_REGION=us-west-2
AWS_CLOUDFRONT_DISTRIBUTION_ID=

# AI Engine Configuration
AI_ENGINE_URL=http://hp-analysis-staging-ai-engine:8080
AI_ENGINE_TIMEOUT=30000
AI_MODEL_VERSION=staging

# Cache Configuration
CACHE_TTL_DEFAULT=60
CACHE_TTL_ANALYTICS=30
CACHE_TTL_STATIC=300

# Queue Configuration
QUEUE_REDIS_URL=
QUEUE_DEFAULT_JOB_OPTIONS='{"removeOnComplete":5,"removeOnFail":25,"attempts":2}'
QUEUE_CONCURRENCY=3

# WebSocket Configuration
WS_HEARTBEAT_INTERVAL=30000
WS_MAX_CONNECTIONS=500

# Feature Flags (Enable experimental features)
FEATURE_REAL_TIME_ANALYTICS=true
FEATURE_AI_INSIGHTS=true
FEATURE_ADVANCED_FILTERING=true
FEATURE_EXPORT_DATA=true
FEATURE_DEBUG_MODE=true

# Performance Settings
NODE_OPTIONS="--max-old-space-size=1024 --max-semi-space-size=64"
UV_THREADPOOL_SIZE=4

# Health Check Settings
HEALTH_CHECK_INTERVAL=30000
DB_HEALTH_CHECK_TIMEOUT=5000
REDIS_HEALTH_CHECK_TIMEOUT=3000

# Pagination Defaults
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# Analytics Settings
ANALYTICS_BATCH_SIZE=500
ANALYTICS_FLUSH_INTERVAL=3000
ANALYTICS_RETENTION_DAYS=90

# Backup Settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 3 * * *"
BACKUP_RETENTION_DAYS=7

# SSL/TLS Settings
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000

# API Documentation (Enabled for staging)
SWAGGER_ENABLED=true
API_DOCS_PATH=/docs

# Timezone
TZ=UTC

# Process Settings
PM2_INSTANCES=2
PM2_MAX_MEMORY_RESTART=1024M
PM2_LOG_DATE_FORMAT=YYYY-MM-DD HH:mm:ss Z

# Graceful Shutdown
GRACEFUL_SHUTDOWN_TIMEOUT=20000

# Request Timeout
REQUEST_TIMEOUT=30000

# Body Parser Limits
BODY_PARSER_LIMIT=10mb
JSON_LIMIT=10mb
URL_ENCODED_LIMIT=10mb

# Testing Configuration
ENABLE_TEST_ROUTES=true
MOCK_EXTERNAL_SERVICES=false
TEST_DATA_ENABLED=true